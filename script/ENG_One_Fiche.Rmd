---
title: ''
author: ''
date: ''
output:
  word_document:
    number_sections: no
    reference_docx: ../output/Template_matu.docx
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

#This script is the one species maturity identification sheet version.

#It contains the codes to create an identification sheet for each maturity phases of females and males of specific species. 

#The sheet created would be divided into two  double-sided sheet : one correspond to females an the other to males. 

#In this script, you will find indications to understand and know what information to fill up at every step. 

#This script is also valid to every other species with photos in the dataset. 


#The "scientific word" for Gadidae is "Gadidae sp." 
#The "scientific word" for Flat fish is 'Flat fish sp."



#For the different types of photos, here are the ID codes: 
# EXT = gonads outside of the fish's internal cavity
# EXT OUV = open gonads outside of the fish's internal cavity 
# INT =  gonads inside of the fish's internal cavity WITHOUT the other organs
# INT ORG = gonads inside of the fish's internal cavity WITH the other organs

```

```{r library, echo=FALSE}

#Library used in the script
library(readxl)
library(dplyr, warn.conflicts = FALSE)
library(knitr)
library(pander)
library(kableExtra, warn.conflicts = FALSE)

#Dataset import
Dataphoto <- read_excel("../data/photo_mat.xlsx",sheet=2)
#Dataphoto = dataset with photos

Datascale <- read_excel("../data/matu_scale.xlsx",sheet=2)
#Datascale = dataset with maturity phases

Datataille <- read_excel("../data/matu_scale.xlsx",sheet=4)
#Datataille = dataset with 1st maturity sizes


```


# MATURITY
## Note specie's common name here 
## *Note scpecie's scientific name here* (Note tutti ID code here)


```{r pressure, echo=FALSE,fig.align='right'}

#The first sheet correspond to the female one

#Gender symbol display
knitr::include_graphics('../data/Female sign.png')

```


```{r PHOTOINDIV, echo=FALSE,fig.align='right', out.width = '150px'}

PHOTO<-Datataille %>% filter(Species=="Flat fish sp.",Sexe=="F")
PHOTO <- PHOTO$Photo

knitr::include_graphics(PHOTO,)

```


```{r Ftaille, echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

TAILLE<-Datataille %>% filter(Species=="Flat fish sp.",Sexe=="F")
TAILLE <- TAILLE$Fishbase

tabT <- data.frame(x=TAILLE )
colnames(tabT) <- c("Taille de 1ère maturité")

knitr::kable(tabT, align='c', position='c', format='simple')%>%kable_styling("striped")%>%column_spec(1,width="3cm")

```

### A - IMMATURE

```{r FphaseA text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This first chunk correspond the the A phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="A - IMMATURE",Sexe=="F")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="A - IMMATURE", Sexe=="F")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)


```

### B - DEVELOPING

```{r FphaseB text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This chunk correspond the the B phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="B - DEVELOPING",Sexe=="F")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="B - DEVELOPING", Sexe=="F")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)


```

### C - SPAWNING

```{r FphaseC text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This chunk correspond the the C phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="C - SPAWNING",Sexe=="F")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="C - SPAWNING", Sexe=="F")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)



```

###### References/Photos 
ICES (**WKASMSF** 2018 & **WKMATCH** 2012)  
IFREMER (CGFS, EVHOE, IBTS)  


\newpage

### D - REGRETION/REGENERATION

```{r FphaseD text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This first chunk correspond the the D phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="D - REGRETION/REGENERATION",Sexe=="F")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="D - REGRETION/REGENERATION", Sexe=="F")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)


```

### E - OMITTED SPAWNING

```{r FphaseE text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This first chunk correspond the the E phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="E - OMITTED SPAWNING",Sexe=="F")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="E - OMITTED SPAWNING", Sexe=="F")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)

```

### F - ABNORMAL

```{r FphaseF text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This first chunk correspond the the F phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="F - ABNORMAL",Sexe=="F")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="F - ABNORMAL", Sexe=="F")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)


```


###### References/Photos   
ICES (**WKASMSF** 2018 & **WKMATCH** 2012)  
IFREMER (CGFS, EVHOE, IBTS)  


\newpage

## Note specie's common name here 
## *Note scpecie's scientific name here* (Note tutti ID code here)

```{r male, echo=FALSE,fig.align='right'}

#The second sheet correspond to the male one

#Gender symbol display
knitr::include_graphics('../data/Male sign.png')

```

```{r PHOTOINDIVm, echo=FALSE,fig.align='right', out.width = '150px'}

PHOTO<-Datataille %>% filter(Species=="Flat fish sp.",Sexe=="M")
PHOTO <- PHOTO$Photo

knitr::include_graphics(PHOTO,)

```


```{r Mtaille, echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

TAILLE<-Datataille %>% filter(Species=="Flat fish sp.",Sexe=="M")
TAILLE <- TAILLE$Fishbase

tabT <- data.frame(x=TAILLE )
colnames(tabT) <- c("Taille de 1ère maturité")

knitr::kable(tabT, align='c', position='c', format='simple')%>%kable_styling("striped")%>%column_spec(1,width="3cm")

```

### A - IMMATURE

```{r MphaseA text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This first chunk correspond the the A phase

#Maturity phase title display
cat("  \n###", "A - IMMATURE")

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="A - IMMATURE",Sexe=="M")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="A - IMMATURE", Sexe=="M")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)

```

### B - DEVELOPING

```{r MphaseB text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This chunk correspond the the B phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="B - DEVELOPING",Sexe=="M")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="B - DEVELOPING", Sexe=="M")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)



```

### C - SPAWNING

```{r MphaseC text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This first chunk correspond the the C phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="C - SPAWNING",Sexe=="M")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="C - SPAWNING", Sexe=="M")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)



```


###### References/Photos  
ICES (**WKASMSF** 2018 & **WKMATCH** 2012)  
IFREMER (CGFS, EVHOE, IBTS)  


\newpage

### D - REGRETION/REGENERATION

```{r MphaseD text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This first chunk correspond the the D phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="D - REGRETION/REGENERATION",Sexe=="M")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="D - REGRETION/REGENERATION", Sexe=="M")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)

```

###E - OMITTED SPAWNING

```{r MphaseE text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This first chunk correspond the the E phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="E - OMITTED SPAWNING",Sexe=="M")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="E - OMITTED SPAWNING", Sexe=="M")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)


```

### F - ABNORMAL

```{r MphaseF text,echo= FALSE, out.width = '250px', results='asis', warning=FALSE}

#This first chunk correspond the the F phase

#Extraction of commentary corresponding to the phase
textASB<-Datascale %>% filter(Species=="Note scpecie's scientific name here",Phase=="F - ABNORMAL",Sexe=="M")
textASB <- textASB$Text

#Creation of a table with the commentaries
tab <- data.frame(x = textASB)
colnames(tab) <- c(" ")
kable(tab)#Table's improvement



#Photos screening process

#Extraction of photos corresponding to the phases
ASB<-Dataphoto %>% filter(Species=="Note scpecie's scientific name here",Phase=="F - ABNORMAL", Sexe=="M")

#Extraction of photos corresponding to the chosen type
ASBType <- filter(ASB,Fiches=='oui'| Fiches=='na')

permutation <- order(ASBType$Fiches, decreasing = TRUE)
ASBType <- head(ASBType[permutation,])

if(ASBType$Fiches=='oui') {
 ASBType <- filter(ASBType, Fiches != "na") 
}
ASBType<-ASBType$Link

#Photos insertion
knitr::include_graphics(ASBType$`Link`,)


```

###### References/Photos  
ICES (**WKASMSF** 2018 & **WKMATCH** 2012)  
IFREMER (CGFS, EVHOE, IBTS)  



